# 测试和展示流程

### step 1 主节点确定

> 覆盖测试用例：
>
> - 4.1.1 已有节点信息收集展示
> - 4.1.2 节点自动推荐

- 浏览器浏览页面：[https://www.jointcloudstorage.cn/](https://www.jointcloudstorage.cn/)，浏览系统内所有节点列表，等待完成测速
- 点击访问推荐的云际网盘节点

![2021-07-26-1627263241-36kOA1](https://static.sumblog.cn/Pic/2021-07-26-1627263241-36kOA1.png)

### step 2 用户注册和初始化设置

> 覆盖测试用例：
>
> - 4.2.1 用户注册
> - 4.3 需求偏好个性化设置

- 点击云际网盘新用户注册，用户名：`test`，密码: `test`
- 填写用户偏好信息：
  - 供应商数目：3
  - 存储成本限制：0.5
  - 流量成本限制：0.9
  - 可用性要求：0.8
  
### step 3 存储方案配置

> 覆盖测试用例：
>
> - 4.4.1 自动化存储方案生成

- 点击存储方案，自动获取存储方案
- 观察自动生成的两种存储方案
- 点击自定义存储方案
  - 存储方式：纠删码
  - 存储云：阿里云-呼和浩特、阿里云-杭州、阿里云-青岛
  - 校验分块：阿里云青岛
- 点击刷新存储方案
  
![2021-07-26-1627263815-ZA2txs](https://static.sumblog.cn/Pic/2021-07-26-1627263815-ZA2txs.png)

### step 4 用户通过网盘前端操作文件

> 覆盖测试用例：
>
> - 4.5 网盘文件操作（纠删码）

- 点击文件管理
- 上传测试文件 5 个
- 等待同步状态为 done
- 随机下载其中两个文件
- 登录 阿里云-青岛 节点，检测目录一致性
- 点击数据分布，观察存储使用情况

![2021-07-26-1627264151-TsGHiM](https://static.sumblog.cn/Pic/2021-07-26-1627264151-TsGHiM.png)

### step 5 管理员操作

> 覆盖测试用例：
>
> - 4.6.1  获取所有节点信息
> - 节点信息修改

- test 用户登出
- 登录管理员账号：`admin`
- 修改腾讯云-成都 流量价格：`0.3`
  ![2021-07-26-1627264722-dOBsRI](https://static.sumblog.cn/Pic/2021-07-26-1627264722-dOBsRI.png)
- 登出管理员账号

### step 6 测试存储迁移

> 覆盖测试用例：
>
> - 4.7.1 触发迁移推荐
> - 4.7.2  用户存储迁移

- 登录 test 账号
- 点击：存储迁移
  ![2021-07-26-1627264771-HwajtV](https://static.sumblog.cn/Pic/2021-07-26-1627264771-HwajtV.png)

![2021-07-26-1627265285-yJNazY](https://static.sumblog.cn/Pic/2021-07-26-1627265285-yJNazY.png)

### step 7 通用编程接口调用

> 覆盖测试用例：
>
> - 4.9.1 通用编程接口秘钥生成
> - 4.9.3 通用编程接口 文件操作接口
> - 4.9.4 状态信息查询接口

- 登录 jsitest 账号
- 点击用户信息 添加密钥对，添加秘钥：test
- 展示 python SDK：[https://pypi.org/project/jcs-sdk/](https://pypi.org/project/jcs-sdk/)
- 运行 python 脚本

  ```
  source venv/bin/activate
  python startNode.py
  ```

![2021-07-26-1627266288-rzLRaz](https://static.sumblog.cn/Pic/2021-07-26-1627266288-rzLRaz.png)

测试场景说明：

- 由于云服务器的配置不同，一个任务的不同阶段可能更适合不同的云服务器处理
  - 某些步骤需要大量 IO 处理
  - 某些步骤需要专用硬件（GPU）
- 这些计算节点使用云际存储进行协作，由于云际存储涵盖不用运营商不同地域的节点，计算节点可以使用运营商内网访问数据，任务处理速度不再受制于网络带宽限制。
- 模拟场景
  - 三节点的流水线处理场景
  - Node 1: 获取待处理数据，上传到云际网盘  阿里云-呼和浩特
  - Node 2: 黑白图像转彩色图像  阿里云-青岛
  - Node 2: 图像效果增强  阿里云-杭州